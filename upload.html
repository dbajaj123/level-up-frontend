<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Chat - Aries Level Up</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Password Protection Overlay -->
        <div id="passwordOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 9999; display: flex; align-items: center; justify-content: center;">
            <div style="background: #1a1a2e; padding: 40px; border-radius: 12px; border: 1px solid #16213e; max-width: 400px; width: 90%;">
                <h2 style="color: #4a90e2; margin-bottom: 10px;">Admin Access Required</h2>
                <p style="color: #b0b0b0; margin-bottom: 30px;">Enter password to access upload page</p>
                <input type="password" id="passwordInput" placeholder="Enter password" style="width: 100%; padding: 12px; background: #0f0f1e; border: 1px solid #16213e; border-radius: 6px; color: #fff; font-size: 16px; margin-bottom: 20px;" />
                <button id="passwordSubmit" style="width: 100%; padding: 12px; background: #4a90e2; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; font-weight: 600;">Unlock</button>
                <p id="passwordError" style="color: #e74c3c; margin-top: 15px; display: none;">Incorrect password</p>
                <a href="index.html" style="display: block; text-align: center; color: #4a90e2; margin-top: 20px; text-decoration: none;">‚Üê Back to Leaderboard</a>
            </div>
        </div>

        <nav class="navbar">
            <div class="nav-links">
                <a href="index.html" class="nav-link">Leaderboard</a>
                <a href="upload.html" class="nav-link active">Upload Chat</a>
            </div>
            <div class="storage-info">
                <span class="storage-icon">DB</span>
                <span id="storageStatus">Data saved locally</span>
            </div>
        </nav>

        <header>
            <h1>Upload Chat History</h1>
            <p class="subtitle">Process chat history to update the leaderboard</p>
        </header>

        <div class="upload-page-content">
            <div class="upload-section-large">
                <div class="upload-icon-large">FILE</div>
                <h2>Select WhatsApp Chat File</h2>
                <p class="upload-description">Export your group chat as a text file and upload it here</p>
                
                <div class="upload-box">
                    <input type="file" id="chatUpload" accept=".txt" />
                    <label for="chatUpload" class="upload-label-large">
                        <span class="upload-icon">UPLOAD</span>
                        <span id="fileName">Choose File or Drag & Drop</span>
                    </label>
                </div>

                <button id="parseBtn" class="btn-primary btn-large">
                    Process Chat & Update Leaderboard
                </button>

                <div id="uploadStatus" class="upload-status"></div>
            </div>

            <div class="instructions-box">
                <h3>How to Export WhatsApp Chat</h3>
                <ol>
                    <li><strong>Open WhatsApp</strong> on your phone</li>
                    <li>Go to your <strong>Level Up group</strong></li>
                    <li>Tap the group name at the top</li>
                    <li>Scroll down and select <strong>"Export chat"</strong></li>
                    <li>Choose <strong>"Without Media"</strong></li>
                    <li>Save the .txt file</li>
                    <li>Transfer to your computer and upload here</li>
                </ol>

                <h3>Score Format in Chat</h3>
                <p>Make sure scores are posted in one of these formats:</p>
                <div class="code-examples">
                    <code>CV: 0.8542</code>
                    <code>Score: 0.8623</code>
                    <code>cv: 0.8591</code>
                    <code>score: 0.8456</code>
                </div>
                <p class="note">Note: Scores must be between 0 and 1</p>

                <h3>What Gets Updated?</h3>
                <ul>
                    <li>New participants are added automatically</li>
                    <li>Better scores replace previous scores</li>
                    <li>Rankings recalculate based on CV score</li>
                    <li>Improvements are tracked from previous best</li>
                    <li>SOTA (highest score) is highlighted</li>
                </ul>

                <div class="sample-download">
                    <p><strong>Need a test file?</strong></p>
                    <a href="sample_chat.txt" download class="btn-secondary">
                        Download Sample Chat
                    </a>
                </div>
            </div>
        </div>

        <div class="recent-uploads" id="recentUploads">
            <h3>Recent Activity</h3>
            <div id="activityLog">
                <p class="empty-state">No uploads yet</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="upload.js"></script>
</body>
</html>
